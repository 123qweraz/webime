<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <title>Pinyin Input Method</title>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <div class="main-layout">
            <div class="toolbar">
                <button id="l-hist-btn" class="btn btn-toggle" onclick="toggleHistoryPanel()">剪切板</button>
                <div style="width: 1px; height: 20px; background: #ddd; margin: 0 5px;"></div>
                <a href="hanzi_explorer.html" class="btn btn-toggle" target="_blank">汉字浏览器</a>
                
                <div id="practice-toolbar" style="display: none; align-items: center; gap: 10px; margin-left: 10px;">
                    <select id="practice-dict-select" class="btn" style="padding: 6px;"></select>
                    <span id="practice-progress-text" style="font-size: 14px; color: #666; font-weight: 600; min-width: 60px;">0 / 0</span>
                    <button id="toggle-pinyin-btn" class="btn btn-toggle" onclick="togglePinyinHint()">显示拼音 (F2)</button>
                </div>

                <button id="practice-mode-btn" class="btn btn-toggle" onclick="startPracticeMode()">练习模式</button>
                <button id="exit-practice-mode-btn" class="btn btn-toggle" onclick="exitPracticeMode()" style="display: none; background-color: #ff4d4f; color: white;">退出练习</button>
                
                <a href="https://github.com/123qweraz/webime" target="_blank" class="btn btn-github">GitHub Star</a>
                <button class="btn btn-toggle" onclick="openDictModal()">词典设置</button>
            </div>
            <div class="content-area">
                <div class="history-panel" id="historyPanel">
                    <div class="history-header">
                        <span>剪切板</span>
                        <button onclick="clearHistory()" class="btn btn-toggle" style="margin-left: auto; font-size: 10px; padding: 4px 8px;">清空</button>
                    </div>
                    <ul id="historyList" class="history-list"></ul>
                </div>
                <div class="resizer" id="left-resizer"></div>
                <div class="center-container">
                    <div class="output-card" id="output-card">
                        <div id="output-area" class="locked" spellcheck="false"></div>
                        <div class="control-group">
                            <button id="edit-mode-btn" class="btn btn-toggle" onclick="toggleEditMode()">锁定模式</button>
                            <button class="btn btn-toggle active" style="background: #222" onclick="archiveAndCopy()">归档并复制</button>
                        </div>
                    </div>
                    <div id="practice-container">
                        <div id="card-left" class="practice-card-slot">
                            <div class="practice-card-content"><div class="pinyin-display"></div><div class="hanzi-display"></div></div>
                        </div>
                        <div id="card-center" class="practice-card-slot">
                            <div class="practice-card-content"><div class="pinyin-display"></div><div class="hanzi-display"></div></div>
                        </div>
                        <div id="card-right" class="practice-card-slot">
                            <div class="practice-card-content"><div class="pinyin-display"></div><div class="hanzi-display"></div></div>
                        </div>
                        <div id="progress-container"><div id="progress-bar"></div></div>
                    </div>
                    <div class="resizer-v" id="center-v-resizer"></div>
                    <div class="input-card" id="input-container">
                        <div class="input-status-bar">
                            <div id="buffer-display"></div>
                            <div id="page-counter"></div>
                        </div>
                        <div id="main-candidates"></div>
                        <div id="correction-wrapper">
                            <input type="text" id="correction-input" autocomplete="off" placeholder="输入拼音短语，用空格分隔，如: ni hao" />
                            <div class="correction-tip">
                                <span>支持长句输入 (空格分隔)</span>
                                <span>Enter 上屏 / Esc 取消</span>
                            </div>
                        </div>
                        <input type="text" id="hidden-input" autocomplete="off" />
                    </div>
                </div>
            </div>
        </div>
        <div id="loading-overlay">
            <div id="loading-spinner"></div>
            <p>正在初始化输入法...</p>
        </div>
        <div id="inputMethodToast" class="input-method-toast"></div>

        <div id="dict-modal" class="modal-overlay" style="display: none">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>词典管理</h3>
                    <button onclick="closeDictModal()">✕</button>
                </div>
                <div class="modal-tabs">
                    <div class="modal-tab active" data-tab="chinese" onclick="switchDictTab('chinese')">中文词典</div>
                    <div class="modal-tab" data-tab="japanese" onclick="switchDictTab('japanese')">日语词典</div>
                    <div class="modal-tab" data-tab="user" onclick="switchDictTab('user')">用户词典</div>
                </div>
                <div class="modal-body">
                    <div id="tab-chinese" class="tab-content active"></div>
                    <div id="tab-japanese" class="tab-content"></div>
                    <div id="tab-user" class="tab-content"></div>
                </div>
            </div>
        </div>

        <!-- Scripts -->
        <script src="js/config.js"></script>
        <script src="js/utils.js"></script>
        <script src="js/trie.js"></script>
        <script src="js/history.js"></script>
        <script src="js/practice.js"></script>
        <script src="js/dict-manager.js"></script>
        <script src="js/ime.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>
